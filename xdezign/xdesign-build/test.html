<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body style="background-color:black">
<script>

  class Shared{

  fn_debugQuarterDate(str_title, obj_date, bln_writeTitle=false){
    
    str_title+=": ";
    if(bln_writeTitle){
      console.log(str_title + obj_date);
    }
    else{
        console.log(obj_date);
    }
  }
  
  fn_debugQuarterDates(bln_writeTitle=false){
    //*
    let str_title;

    this.fn_debugQuarterDate("date_q04", this.date_q04, bln_writeTitle);
    this.fn_debugQuarterDate("date_q03", this.date_q03, bln_writeTitle);    
    this.fn_debugQuarterDate("date_q02", this.date_q02, bln_writeTitle);
    this.fn_debugQuarterDate("date_q01", this.date_q01, bln_writeTitle);
    console.log("---");

    this.fn_debugQuarterDate("date_q1", this.date_q1, bln_writeTitle);
    this.fn_debugQuarterDate("date_q2", this.date_q2, bln_writeTitle);
    this.fn_debugQuarterDate("date_q3", this.date_q3, bln_writeTitle);
    this.fn_debugQuarterDate("date_q4", this.date_q4, bln_writeTitle);
    console.log("---");

    this.fn_debugQuarterDate("date_q5", this.date_q5, bln_writeTitle);
    this.fn_debugQuarterDate("date_q6", this.date_q6, bln_writeTitle);
    this.fn_debugQuarterDate("date_q7", this.date_q7, bln_writeTitle);
    this.fn_debugQuarterDate("date_q8", this.date_q8, bln_writeTitle);
    console.log("---");
    //*/
  }

  

  fn_getQuarterPeriod(int_fiscalYearEndMonth, date_today){

    this.bln_debugQuarter=true;    
    //fiscalYearEndMonth( January =0, February=1...)
    
    let today=date_today;
    if(this.bln_debugQuarter){
      console.log("today: " + today);
    }
    
    let str_thisYear=today.getFullYear();    
    if(this.bln_debugQuarter){
      const arr_monthNames = ["January", "February", "March","April","May","June","July","August","September","October","November","December"];    
      let str_yearEndMonthName=arr_monthNames[int_fiscalYearEndMonth];
      console.log(str_yearEndMonthName + ", " +  str_thisYear);
    }
    
    let obj_period={};                
    let date_yearEndMonth;
    let date_qmin;
    
    let date_q01, date_q02, date_q03, date_q04;
    let date_q1, date_q2, date_q3, date_q4;
    let date_q5, date_q6, date_q7, date_q8;

    
    date_yearEndMonth=new Date(str_thisYear, int_fiscalYearEndMonth, 1);
    //console.log(date_yearEndMonth);    

    date_q01=new Date(date_yearEndMonth.getFullYear(), 0, 1);            
    date_q01.setMonth(date_yearEndMonth.getMonth()-2);        
    //console.log(date_q01);

    date_q02=new Date(date_q01.getFullYear(), 0, 1);            
    date_q02.setMonth(date_q01.getMonth()-3);        
    //console.log(date_q02);
    
    date_q03=new Date(date_q02.getFullYear(), 0, 1);            
    date_q03.setMonth(date_q02.getMonth()-3);    
    //console.log(date_q03);
    
    date_q04=new Date(date_q03.getFullYear(), 0, 1);            
    date_q04.setMonth(date_q03.getMonth()-3);    
    //console.log(date_q04);

    //-----------------
    
    date_q1=new Date(date_yearEndMonth.getFullYear(), 0, 1);            
    date_q1.setMonth(date_yearEndMonth.getMonth()+1);        
    //console.log(date_q1);

    date_q2=new Date(date_q1.getFullYear(), 0, 1);            
    date_q2.setMonth(date_q1.getMonth()+3);        
    //console.log(date_q2);
    
    date_q3=new Date(date_q2.getFullYear(), 0, 1);            
    date_q3.setMonth(date_q2.getMonth()+3);    
    //console.log(date_q3);
    
    date_q4=new Date(date_q3.getFullYear(), 0, 1);            
    date_q4.setMonth(date_q3.getMonth()+3);    
    //console.log(date_q4);

    date_q5=new Date(date_q4.getFullYear(), 0, 1);            
    date_q5.setMonth(date_q4.getMonth()+3);        
    //console.log(date_q5);

    date_q6=new Date(date_q5.getFullYear(), 0, 1);            
    date_q6.setMonth(date_q5.getMonth()+3);        
    //console.log(date_q6);
    
    date_q7=new Date(date_q6.getFullYear(), 0, 1);            
    date_q7.setMonth(date_q6.getMonth()+3);    
    //console.log(date_q7);
    
    date_q8=new Date(date_q7.getFullYear(), 0, 1);            
    date_q8.setMonth(date_q7.getMonth()+3);    
    //console.log(date_q8);

    if(this.bln_debugQuarter){
      this.date_q01=date_q01;this.date_q02=date_q02;this.date_q03=date_q03;this.date_q04=date_q04;
      this.date_q1=date_q1;this.date_q2=date_q2;this.date_q3=date_q3;this.date_q4=date_q4;
      this.date_q5=date_q5;this.date_q6=date_q6;this.date_q7=date_q7;this.date_q8=date_q8;    
      this.fn_debugQuarterDates()
    }    

    if(today>=date_q04 && today<date_q03){
      if(this.bln_debugQuarter){console.log("PAST current quarter is q1")}  
      obj_period.int_todayQuarter=1;
      obj_period.date_thisQuarter=date_q04;
      obj_period.date_nextQuarter=date_q03;            
      obj_period.date_next1Quarter=date_q02;            
      obj_period.date_next2Quarter=date_q01;            
      
    }

    if(today>=date_q03 && today<date_q02){
      if(this.bln_debugQuarter){console.log("PAST current quarter is q2")}        
      obj_period.int_todayQuarter=2;
      obj_period.date_thisQuarter=date_q03;
      obj_period.date_nextQuarter=date_q02;            
      obj_period.date_next1Quarter=date_q01;            
      obj_period.date_next2Quarter=date_q1;            
    }

    if(today>=date_q02 && today<date_q01){
      if(this.bln_debugQuarter){console.log("PAST current quarter is q3")}              
      obj_period.int_todayQuarter=3;
      obj_period.date_thisQuarter=date_q02;
      obj_period.date_nextQuarter=date_q01;           
      obj_period.date_next1Quarter=date_q1;            
      obj_period.date_next2Quarter=date_q2;             
    }
    if(today>=date_q01 && today<date_q1){
      if(this.bln_debugQuarter){console.log("PAST current quarter is q4")}                    
      obj_period.int_todayQuarter=4;
      obj_period.date_thisQuarter=date_q01;
      obj_period.date_nextQuarter=date_q1;            
      obj_period.date_next1Quarter=date_q2;            
      obj_period.date_next2Quarter=date_q3;             
    }
    //---

    if(today>=date_q1 && today<date_q2){
      if(this.bln_debugQuarter){console.log("PRESENT current quarter is q1")}                          
      obj_period.int_todayQuarter=1;
      obj_period.date_thisQuarter=date_q1;
      obj_period.date_nextQuarter=date_q2;            
      obj_period.date_next1Quarter=date_q3;            
      obj_period.date_next2Quarter=date_q4;             
    }
    if(today>=date_q2 && today<date_q3){
      if(this.bln_debugQuarter){console.log("PRESENT current quarter is q2")}                          
      obj_period.int_todayQuarter=2;
      obj_period.date_thisQuarter=date_q2;
      obj_period.date_nextQuarter=date_q3;            
      obj_period.date_next1Quarter=date_q4;            
      obj_period.date_next2Quarter=date_q5;             
    }
    if(today>=date_q3 && today<date_q4){
      if(this.bln_debugQuarter){console.log("PRESENT current quarter is q3")}                                
      obj_period.int_todayQuarter=3;
      obj_period.date_thisQuarter=date_q3;
      obj_period.date_nextQuarter=date_q4;            
      obj_period.date_next1Quarter=date_q5;            
      obj_period.date_next2Quarter=date_q6;             
    }
    if(today>=date_q4 && today<date_q5){
      if(this.bln_debugQuarter){console.log("PRESENT current quarter is q4")}                                      
      obj_period.int_todayQuarter=4;
      obj_period.date_thisQuarter=date_q4;
      obj_period.date_nextQuarter=date_q5;            
      obj_period.date_next1Quarter=date_q6;            
      obj_period.date_next2Quarter=date_q7;             
    }
    //---

    if(today>=date_q5 && today<date_q6){
      if(this.bln_debugQuarter){console.log("FUTURE current quarter is q1")}                                      
      obj_period.int_todayQuarter=1;
      obj_period.date_thisQuarter=date_q5;
      obj_period.date_nextQuarter=date_q6;            
      obj_period.date_next1Quarter=date_q7;            
      obj_period.date_next2Quarter=date_q8;             
    }
    //*
    if(today>=date_q6 && today<date_q7){
      if(this.bln_debugQuarter){console.log("WONT SEE FUTURE current quarter is q2")}                                            
      obj_period.int_todayQuarter=2;
      obj_period.date_thisQuarter=date_q6;
      obj_period.date_nextQuarter=date_q7;            
      obj_period.date_next1Quarter=date_q8;                  
    }
    if(today>=date_q7 && today<date_q8){
      if(this.bln_debugQuarter){console.log("WONT SEE FUTURE current quarter is q3")}                                            
      obj_period.int_todayQuarter=3;
      obj_period.date_thisQuarter=date_q7;
      obj_period.date_nextQuarter=date_q8;            
    }
    if(today>=date_q8){
      if(this.bln_debugQuarter){console.log("WONT SEE FUTURE current quarter is q4")}                                            
      obj_period.int_todayQuarter=4;
      obj_period.date_thisQuarter=date_q8;      
    }
    //*/
    return obj_period;
  }

  fn_getYearPeriod(int_fiscalYearEndMonth, date_today=false){
    let obj_period={};                    

    let today=date_today;
    if(!date_today){
      today=new Date();
    }

    let str_thisYear=today.getFullYear();    

    /*
    const arr_monthNames = ["January", "February", "March","April","May","June","July","August","September","October","November","December"];    
    let str_yearEndMonthName=arr_monthNames[int_fiscalYearEndMonth];
    console.log(str_yearEndMonthName + ", " +  str_thisYear);
    //*/

    let date_yearEndMonth=new Date(str_thisYear, int_fiscalYearEndMonth, 1);       
    

    let date_q1;
    date_q1=new Date(date_yearEndMonth.getFullYear(), 0, 1);            
    date_q1.setMonth(date_yearEndMonth.getMonth()+1); //note plus 1        
    //console.log("date_q1: " + date_q1);
    
    let str_year1=date_q1.getFullYear()+1; 
    let str_year2=date_q1.getFullYear()+2; 

    
    obj_period.date_thisPeriod=new Date(str_year1, date_q1.getMonth(), 1); 
    obj_period.date_nextPeriod=new Date(str_year2, date_q1.getMonth(), 1);     
    
    return obj_period;
  }


}

obj_shared=new Shared;

/*
for(var i=0;i<12;i++){

  let fiscalYearEndMonth, date_today;
  fiscalYearEndMonth = i; // December (0-based index, so 11 means December)  
  
  for(var j=0;j<12;j++){
    console.log("----------------------");    
    let date_today, str_date;
    let str_year, str_month, str_day;
    str_year="2024";
    str_month="08";
    str_day="06";
    str_date=str_year + "-" + str_month + "-" + str_day;
    date_today = new Date(str_year, j, str_day);            
    let obj_period=obj_shared.fn_getQuarterPeriod(fiscalYearEndMonth, date_today);    
    console.log("obj_period.date_thisQuarter: " + obj_period.date_thisQuarter);      
    console.log("obj_period.date_nextQuarter: " + obj_period.date_nextQuarter);      
    console.log("obj_period.date_next1Quarter: " + obj_period.date_next1Quarter);      
    console.log("obj_period.date_next2Quarter: " + obj_period.date_next2Quarter);          
  }  
}
//*/

for(var i=0;i<12;i++){

let fiscalYearEndMonth, date_today;
fiscalYearEndMonth = i; // December (0-based index, so 11 means December)  

  console.log("----------------------");    
  let str_date;
  let str_year, str_month, str_day;
  str_year="2024";
  str_month="08";
  str_day="06";
  str_date=str_year + "-" + str_month + "-" + str_day;
  date_today = new Date(str_year, i, str_day);            
  let obj_period=obj_shared.fn_getYearPeriod(fiscalYearEndMonth, date_today);    
  console.log("obj_period.date_thisPeriod: " + obj_period.date_thisPeriod);      
  console.log("obj_period.date_nextPeriod: " + obj_period.date_nextPeriod);          

}



</script>
</body>
</html>
